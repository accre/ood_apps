---
cluster: "accre"
form:
  - bc_num_slots
  - bc_num_hours
  - bc_num_cores
  - bc_mem
  - qos
  - numgpus
  - gpus_type
  - gpus_type_interactive
  - cpuarch
  - bc_account
  - version
  - use_reservation
  - reservation
  - use_apptainer
  - apptainer
attributes:
  bc_account:
    label: "ACCRE Slurm Group"
    help: "Leave blank to use your default slurm group"
  bc_queue: null
  bc_num_slots: null
  bc_num_hours:
    value: 48
  qos:
    label: "Quality of Service (QOS)"
    help: |
      QOS to associate with this job. Use the "slurm_resources" command to
      see a list of QOSs available to your user for each slurm account that
      your user has access to. Note that for the special "debug_int" (interactive)
      and "debug_iacc" QOS(s) your specified wall clock time will be ignored
      and your job limit will be set to 30 minutes.
  bc_mem:
    label: "Maximum Memory (GB)"
    value: 4
  bc_num_cores:
    label: "Number of CPU Cores"
    value: 1
  cpuarch:
    widget: select
    label: "CPU Architecture"
    help: "Defaults to the first available node with any architecture"
    options:
      - [ "Any", "any" ]
      - [ "Any x86_64-v4 (AVX512 support)", "x86-64v4" ]
      - [ "Any AMD", "amd" ]
      - [ "Any Intel", "intel" ]
      - [ "AMD Zen4", "zen4" ]
      - [ "AMD Zen3", "zen3" ]
      - [ "AMD Zen2", "zen2" ]
      - [ "Intel Cascade Lake", "cascadelake" ]
      - [ "Intel Skylake", "skylake" ]
      - [ "Intel Haswell", "haswell" ]
  gpus_type:
    widget: select
    label: "GPU Type"
    help: |
      Select your desired GPU type Please see the
      <a href='https://help.accre.vanderbilt.edu/index.php?title=GPUs_at_ACCRE'>help wiki gpu page</a>
      for a list of GPU types available and their corresponding slurm GRES type. Make sure that
      your selected GPU type is available to the slurm account you have chosen. Use the
      "slurm_resources" command to determine what GPU types are available to your selected account.
    options:
      - [ 'Nvidia RTX A6000', 'nvidia_rtx_a6000' ]
      - [ 'Nvidia RTX A4000', 'nvidia_rtx_a4000' ]
      - [ 'Nvidia H100', 'nvidia_h100_nvl' ]
      - [ 'Nvidia A100 (80GB)', 'nvidia_a100_80gb' ]
      - [ 'Nvidia L40S', 'nvidia_l40s' ]
      - [ 'Nvidia Quadro RTX 6000', 'quadro_rtx_6000' ]
      - [ 'Nvidia RTX 2080 Ti', 'nvidia_geforce_rtx_2080_ti' ]
      - [ 'Nvidia Titan X (or Xp)', 'nvidia_titan_x' ]
  gpus_type_interactive:
    widget: select
    label: "GPU Type (Interactive)"
    help: |
      Select your desired GPU type for **interactive GPU** jobs.~~
      Please see the
      <a href='https://help.accre.vanderbilt.edu/index.php?title=GPUs_at_ACCRE'>help wiki GPU page</a>
      for a list of GPU types available and their corresponding Slurm GRES type.
      Make sure that your selected GPU type is available to the Slurm account you have chosen.
      Use the `slurm_resources` command to determine what GPU types are available to your selected account.
    options:
      - [ 'Nvidia RTX A4000', 'nvidia_rtx_a4000' ]
      - [ 'Nvidia RTX A6000', 'nvidia_rtx_a6000' ]
      - [ 'Nvidia RTX 2080 Ti', 'nvidia_geforce_rtx_2080_ti' ]
      - [ 'Nvidia RTX 3090', 'nvidia_geforce_rtx_3090' ]
      - [ 'Nvidia A100-SXM4 (DGX 40 GB)', 'nvidia_a100-sxm4-40gb' ]
      - [ 'Nvidia A100-SXM4 (DGX 80 GB)', 'nvidia_a100-sxm4-80gb' ]
  numgpus:
    label: "Number of GPUs"
    value: 1
    help: |
      State the number of GPUs required for your job. Note that the system memory and
      physical CPU cores reserved for your job will be automatically set to a proportion
      of the resources available on the node per GPU card.
  version:
    widget: select
    label: "Version of R to load"
    options:
      - [ "ACCRE Singularity R 4.4.2 for x86-64-v3", "R-4.4.2-v3"]
      - [ "ACCRE Singularity R 4.5.0 for x86-64-v3", "R-4.5.0-v3"]
      - [ "ACCRE Singularity R 4.5.2 for x86-64-v3 (Experimental!)", "R-4.5.2-v3"]
  use_reservation:
    widget: check_box
    checked_value: 1
    unchecked_value: 0
    label: "Use a slurm reservation"
    help: "Check this box if you wish to use a slurm reservation"
  reservation:
    label: "Slurm Reservation Name"
    value: ""
    help: "Leave blank unless using a slurm reservation"
  use_apptainer:
    widget: check_box
    checked_value: 1
    unchecked_value: 0
    label: "Bring Your Own RStudio Apptainer (Singularity) Container"
    help: |
      Check this box if you wish to use a custom R/RStudio apptainer (formerly singularity)
      container.  Your container must be built so that the "rserver" binary is located at
      "/usr/lib/rstudio-server/bin/rserver" within the container, and the "R" binary is
      located at "/usr/local/bin/R".
  apptainer:
    widget: "text_field"
    label: "Path to Apptainer (Singularity) Container"
    help: |
      Leave blank unless using an apptainer (formerly singularity) container. To find your
      apptainer container, you must specify the absolute path.
    value: ""
